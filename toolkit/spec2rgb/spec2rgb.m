function [ RGB ] = spec2rgb( specImg, wl )

[a,b,c]=size(specImg);

if nargin < 2
	wl=[450.51	451.486	452.469	453.459	454.457	455.463	456.477	457.498	458.528	459.566	460.612	461.667	462.73	463.801	464.882	465.972	467.071	468.179	469.296	470.423	471.56	472.707	473.864	475.031	476.209	477.397	478.596	479.806	481.027	482.259	483.504	484.759	486.027	487.308	488.6	489.905	491.224	492.555	493.9	495.259	496.631	498.018	499.419	500.836	502.267	503.714	505.176	506.655	508.15	509.662	511.191	512.737	514.302	515.884	517.486	519.106	520.746	522.406	524.087	525.789	527.512	529.257	531.024	532.815	534.629	536.467	538.331	540.219	542.134	544.076	546.045	548.043	550.069	552.125	554.212	556.331	558.482	560.666	562.885	565.138	567.429	569.756	572.123	574.529	576.976	579.465	581.998	584.576	587.201	589.873	592.596	595.369	598.196	601.078	604.017	607.015	610.074	613.197	616.385	619.641	622.969	626.369	629.847	633.403	637.043	640.768	644.583	648.491	652.497	656.604	660.816	665.139	669.576	674.134	678.818	683.632	688.584	693.679	698.924];
end

min = 450; max = 700;
wl = wl(1:3:119);

step=5;
x_new=linspace(min,max,round((max-min)./step)+1);
x=round(spline(wl,1:c,x_new));
aa=linspace(1,a,a);
bb=linspace(1,b,b);
% cc=linspace(1,c);
[AA,BB,CC]=meshgrid(aa,bb,x);
temp=interp3(specImg,BB,AA,CC);
temp=permute(temp,[2,1,3]);
temp(:,:,1)=temp(:,:,2); 

RGB=convRGB(temp,min,max,step);




